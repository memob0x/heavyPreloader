{"version":3,"sources":["unknown"],"names":["Load","register","type","loader","load","blob","options","keys","split","reduce","x","y","key","TypeError"],"mappings":"gSAGA,cAAe,MAAMA,CAAAA,IAAK,sDAGX,EAHW,IAWtBC,QAAQ,CAACC,IAAD,CAAOC,MAAP,CAAe,CACnB,qCAAcD,IAAd,EAAsBC,MAAtB,CACH,CASD,KAAMC,CAAAA,IAAN,CAAWC,IAAX,CAAiBC,OAAjB,CAA0B,CACtB,KAAMJ,CAAAA,IAAI,CAAGG,IAAI,CAACH,IAAlB,CAGA,KAAMK,CAAAA,IAAI,CAAGL,IAAI,CAACM,KAAL,CAAW,GAAX,EAAgBC,MAAhB,CAAuB,CAACC,CAAD,CAAIC,CAAJ,GAAU,CAACT,IAAD,CAAOQ,CAAP,CAAUC,CAAV,CAAjC,CAAb,CAGA,IAAK,KAAMC,CAAAA,GAAX,GAAkBL,CAAAA,IAAlB,CAAwB,CACpB,KAAMJ,CAAAA,MAAM,CAAGI,IAAI,CAACK,GAAD,CAAnB,CAEA,GAAIT,MAAM,0BAAI,IAAJ,UAAV,CAA6B,CACzB,MAAO,MAAM,sCAAcA,MAAd,EAAsBE,IAAtB,CAA4BC,OAA5B,CAAb,CACH,CACJ,CAGD,KAAM,IAAIO,CAAAA,SAAJ,CACD,WAAUR,IAAI,CAACH,IAAK,mDADnB,CAAN,CAGH,CAzCqB","sourcesContent":["/**\n *\n */\nexport default class Load {\n    // loaders closure, filled with default loaders\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types\n    #loaders = {};\n\n    /**\n     *\n     * @param {String} type\n     * @param {Function} loader\n     * @returns {void}\n     */\n    register(type, loader) {\n        this.#loaders[type] = loader;\n    }\n\n    /**\n     * Loads a resource, which usually consists in attaching it to an existent DOM element\n     * @private\n     * @param {Blob} blob The resource to be loaded in Blob form\n     * @param {Object} options The resource load options\n     * @returns {Promise} The resource load in promise form\n     */\n    async load(blob, options) {\n        const type = blob.type;\n\n        //...\n        const keys = type.split(\"/\").reduce((x, y) => [type, x, y]);\n\n        // ...\n        for (const key in keys) {\n            const loader = keys[key];\n\n            if (loader in this.#loaders) {\n                return await this.#loaders[loader](blob, options);\n            }\n        }\n\n        // ...\n        throw new TypeError(\n            `Invalid ${blob.type} media type passed to Loader class \"load\" method.`\n        );\n    }\n}\n"]}