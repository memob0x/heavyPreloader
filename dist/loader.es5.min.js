"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function asyncGeneratorStep(e,t,r,n,o,c,a){try{var i=e[c](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var c=e.apply(t,r);function a(e){asyncGeneratorStep(c,n,o,a,i,"next",e)}function i(e){asyncGeneratorStep(c,n,o,a,i,"throw",e)}a(void 0)})}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("Loader",["exports"],t):t((e=e||self).Loader={})}(void 0,function(e){var t=function(e){return e.blob.type?URL.createObjectURL(e.blob):e.response.url},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"src",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Image;return new Promise(function(n,o){r.onload=n,r.onerror=o,r.setAttribute(t,e)})},n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.createElement("div"),r=new CSSStyleSheet,n=r.replace('@import url("'.concat(e,'")'));return"adoptedStyleSheets"in t&&(t.adoptedStyleSheets=[].concat(_toConsumableArray(t.adoptedStyleSheets),[r])),n},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.createElement("object");return"OBJECT"===t.tagName?function(e,t){return new Promise(function(e,r){t.onload=e,t.onerror=r,t.data=preload[i],t.width=0,t.height=0,document.body.append(t)})}(0,t):new Promise(function(r,n){t.onload=r,t.onerror=n,t.src=e,t.async=!0,document.head.append(t)})},c=Object.freeze({__proto__:null,image:r,style:n,script:o}),a=function(){var e;onmessage=(e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.prev=1,e.next=4,fetch(r.url);case 4:return n=e.sent,e.next=7,n.blob();case 7:o=e.sent,r.response={url:n.url,status:n.status,statusText:n.statusText},r.blob=o,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),r.response={url:r.url,status:200},r.blob={type:null};case 16:postMessage(r);case 17:case"end":return e.stop()}},e,null,[[1,12]])})),function(t){return e.apply(this,arguments)})},u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.worker=new Worker(URL.createObjectURL(new Blob(["(",a.toString(),")()"],{type:"application/javascript"}))),this._options=_objectSpread({},t,{},{})}return _createClass(e,[{key:"fetch",value:function(e){var t=this,r=function(e){var t=document.createElement("a");return t.href=e,t}(e);return e=r.href,new Promise(function(n,o){try{if(function(e){return e.host!==window.location.host}(r)){var a={response:{url:e,status:200},blob:{type:null}};return"image"in c?c.image(e).then(function(){return n(a)}).catch(o):void n(a)}t.worker.postMessage({url:e}),t.worker.addEventListener("message",function(t){var r=t.data;r.url===e&&(200===r.response.status?n(r):o(new Error("".concat(r.response.statusText," ").concat(r.response.url))))})}catch(e){o(e)}})}}],[{key:"adoptStyleSheet",value:function(e){var r=t(e);return n(r,document).finally(function(){return URL.revokeObjectURL(r)})}},{key:"insertScript",value:function(e){var r=t(e);return o(r,document.createElement("script")).finally(function(){return URL.revokeObjectURL(r)})}},{key:"setImageAttribute",value:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"src",c=t(e);return r(c,o,n).finally(function(){return URL.revokeObjectURL(c)})}}]),e}(),s=new u;_toConsumableArray(document.querySelectorAll("img[data-src]")).forEach(function(e){return s.fetch(e.dataset.src).then(function(t){return u.setImageAttribute(t,e)}).catch(function(e){return console.error(e)})}),s.fetch("dist/styles.css").then(function(e){return u.adoptStyleSheet(e)}).catch(function(e){return console.error(e)}),s.fetch("dist/extra.css").then(function(e){return u.adoptStyleSheet(e)}).catch(function(e){return console.error(e)}),s.fetch("dist/scripts.js").then(function(e){return u.insertScript(e)}).catch(function(e){return console.error(e)}),s.fetch("dist/not-existent.js").then(function(e){return u.insertScript(e)}).catch(function(e){return console.error(e)}),e.Loader=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=loader.es5.min.js.map
