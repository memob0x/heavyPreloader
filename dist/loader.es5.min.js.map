{"version":3,"sources":["loader.mjs"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_getRequireWildcardCache","WeakMap","cache","_interopRequireWildcard","obj","__esModule","_typeof","default","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","hasOwnProperty","call","desc","set","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","push","apply","_objectSpread","arguments","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","err","undefined","global","factory","exports","module","define","amd","Loader","_ref2","_ref3","_ref4","_ref5","_ref6","_ref7","body","onmessage","_ref","regeneratorRuntime","mark","_callee","event","response","blob","wrap","_context","prev","next","fetch","data","href","options","sent","status","statusText","t0","postMessage","stop","_x","lworker","requests","url","URL","createObjectURL","Blob","type","Worker","revokeObjectURL","lfetch","_callee2","_args2","_context2","abrupt","worker","addEventListener","terminate","Error","concat","_x2","css","_callee3","sheet","_context3","element","document","CSSStyleSheet","replace","adoptedStyleSheets","_x3","_x4","html","_callee4","reader","promise","result","_context4","FileReader","buffer","srcElement","readAsText","DOMParser","parseFromString","querySelectorAll","map","x","outerHTML","reduce","y","HTMLElement","innerHTML","_x5","_x6","image","_callee5","_context5","HTMLImageElement","Image","onload","onerror","src","_x7","_x8","javascript","_callee6","_context6","require","_x9","lload","_callee7","_context7","_x10","_x11","cors","_fetch","_callee8","a","_this","_context8","createElement","_x12","_load","_callee9","el","_this2","_context9","load","_x13","_x14"],"mappings":"AAAA,aAEA,SAASA,gBAAgBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAEhH,SAASC,kBAAkBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAE7S,SAASO,aAAad,EAAae,EAAYC,GAAmJ,OAAhID,GAAYb,kBAAkBF,EAAYiB,UAAWF,GAAiBC,GAAad,kBAAkBF,EAAagB,GAAqBhB,EAEzM,SAASkB,2BAA6B,GAAuB,mBAAZC,QAAwB,OAAO,KAAM,IAAIC,EAAQ,IAAID,QAA6F,OAAlFD,yBAA2B,WAAsC,OAAOE,GAAiBA,EAE1M,SAASC,wBAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,OAAOD,EAAO,GAAY,OAARA,GAAiC,WAAjBE,QAAQF,IAAoC,mBAARA,EAAsB,MAAO,CAAEG,QAAWH,GAAS,IAAIF,EAAQF,2BAA4B,GAAIE,GAASA,EAAMM,IAAIJ,GAAQ,OAAOF,EAAMO,IAAIL,GAAQ,IAAIM,EAAS,GAAQC,EAAwBlB,OAAOC,gBAAkBD,OAAOmB,yBAA0B,IAAK,IAAIjB,KAAOS,EAAO,GAAIX,OAAOM,UAAUc,eAAeC,KAAKV,EAAKT,GAAM,CAAE,IAAIoB,EAAOJ,EAAwBlB,OAAOmB,yBAAyBR,EAAKT,GAAO,KAAUoB,IAASA,EAAKN,KAAOM,EAAKC,KAAQvB,OAAOC,eAAegB,EAAQf,EAAKoB,GAAgBL,EAAOf,GAAOS,EAAIT,GAA4E,OAAhEe,EAAgB,QAAIN,EAASF,GAASA,EAAMc,IAAIZ,EAAKM,GAAkBA,EAEruB,SAASO,mBAAmBC,GAAO,OAAOC,mBAAmBD,IAAQE,iBAAiBF,IAAQG,4BAA4BH,IAAQI,qBAElI,SAASA,qBAAuB,MAAM,IAAIvC,UAAU,wIAEpD,SAASsC,4BAA4BE,EAAGC,GAAU,GAAKD,EAAL,CAAgB,GAAiB,iBAANA,EAAgB,OAAOE,kBAAkBF,EAAGC,GAAS,IAAIE,EAAIjC,OAAOM,UAAU4B,SAASb,KAAKS,GAAGK,MAAM,GAAI,GAAiE,MAAnD,WAANF,GAAkBH,EAAEM,cAAaH,EAAIH,EAAEM,YAAYC,MAAgB,QAANJ,GAAqB,QAANA,EAAoBK,MAAMC,KAAKN,GAAc,cAANA,GAAqB,2CAA2CO,KAAKP,GAAWD,kBAAkBF,EAAGC,QAAzG,GAE7S,SAASJ,iBAAiBc,GAAQ,GAAsB,oBAAXC,QAA0BA,OAAOC,YAAY3C,OAAOyC,GAAO,OAAOH,MAAMC,KAAKE,GAE1H,SAASf,mBAAmBD,GAAO,GAAIa,MAAMM,QAAQnB,GAAM,OAAOO,kBAAkBP,GAEpF,SAASO,kBAAkBP,EAAKoB,IAAkB,MAAPA,GAAeA,EAAMpB,EAAI9B,UAAQkD,EAAMpB,EAAI9B,QAAQ,IAAK,IAAID,EAAI,EAAGoD,EAAO,IAAIR,MAAMO,GAAMnD,EAAImD,EAAKnD,IAAOoD,EAAKpD,GAAK+B,EAAI/B,GAAM,OAAOoD,EAEhL,SAASC,QAAQC,EAAQC,GAAkB,IAAIC,EAAOlD,OAAOkD,KAAKF,GAAS,GAAIhD,OAAOmD,sBAAuB,CAAE,IAAIC,EAAUpD,OAAOmD,sBAAsBH,GAAaC,IAAgBG,EAAUA,EAAQC,OAAO,SAAUC,GAAO,OAAOtD,OAAOmB,yBAAyB6B,EAAQM,GAAKzD,cAAgBqD,EAAKK,KAAKC,MAAMN,EAAME,GAAY,OAAOF,EAE9U,SAASO,cAAcjE,GAAU,IAAK,IAAIE,EAAI,EAAGA,EAAIgE,UAAU/D,OAAQD,IAAK,CAAE,IAAIiE,EAAyB,MAAhBD,UAAUhE,GAAagE,UAAUhE,GAAK,GAAQA,EAAI,EAAKqD,QAAQ/C,OAAO2D,IAAS,GAAMC,QAAQ,SAAU1D,GAAO2D,gBAAgBrE,EAAQU,EAAKyD,EAAOzD,MAAsBF,OAAO8D,0BAA6B9D,OAAO+D,iBAAiBvE,EAAQQ,OAAO8D,0BAA0BH,IAAmBZ,QAAQ/C,OAAO2D,IAASC,QAAQ,SAAU1D,GAAOF,OAAOC,eAAeT,EAAQU,EAAKF,OAAOmB,yBAAyBwC,EAAQzD,MAAe,OAAOV,EAE7gB,SAASqE,gBAAgBlD,EAAKT,EAAK8D,GAAiK,OAApJ9D,KAAOS,EAAOX,OAAOC,eAAeU,EAAKT,EAAK,CAAE8D,MAAOA,EAAOnE,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBY,EAAIT,GAAO8D,EAAgBrD,EAE3M,SAASsD,mBAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQpE,EAAKqE,GAAO,IAAM,IAAIC,EAAON,EAAIhE,GAAKqE,GAAUP,EAAQQ,EAAKR,MAAS,MAAOS,GAAwB,YAAfL,EAAOK,GAAsBD,EAAKE,KAAQP,EAAQH,GAAiBW,QAAQR,QAAQH,GAAOY,KAAKP,EAAOC,GAE7P,SAASO,kBAAkBC,GAAM,OAAO,WAAc,IAAIC,EAAOC,KAAMC,EAAOvB,UAAW,OAAO,IAAIiB,QAAQ,SAAUR,EAASC,GAAU,IAAIF,EAAMY,EAAGtB,MAAMuB,EAAME,GAAO,SAASZ,EAAML,GAASC,mBAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQN,GAAU,SAASM,EAAOY,GAAOjB,mBAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASY,GAAQb,OAAMc,MAEjX,SAAStE,QAAQF,GAAmV,OAAtOE,QAArD,mBAAX6B,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBhC,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAX+B,QAAyB/B,EAAIyB,cAAgBM,QAAU/B,IAAQ+B,OAAOpC,UAAY,gBAAkBK,IAAyBA,IAEnX,SAAWyE,EAAQC,GACqD,YAAlD,oBAAZC,QAA0B,YAAczE,QAAQyE,WAA4C,oBAAXC,OAAyBA,OAAOD,QAAUD,IAA8B,mBAAXG,QAAyBA,OAAOC,IAAMD,OAAO,SAAUH,IAAYD,EAASA,GAAUL,MAAaW,OAASL,IADpQ,MAEG,EAAQ,WAGT,IA6EMM,EA2DAC,EAuCAC,EAiDAC,EAmCAC,EA+BAC,EAlSFC,EAAO,WACT,OAAOC,WACDC,EAAOtB,kBAAkBuB,mBAAmBC,KAAK,SAASC,EAAQC,GACpE,IAAIC,EAAUC,EACd,OAAOL,mBAAmBM,KAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAGH,OAFAF,EAASC,KAAO,EAChBD,EAASE,KAAO,EACTC,MAAMP,EAAMQ,KAAKC,KAAMT,EAAMQ,KAAKE,SAE3C,KAAK,EAGH,OAFAT,EAAWG,EAASO,KACpBP,EAASE,KAAO,EACTL,EAASC,OAElB,KAAK,EACHA,EAAOE,EAASO,KAChBX,EAAMQ,KAAKI,OAASX,EAASW,OAC7BZ,EAAMQ,KAAKK,WAAaZ,EAASY,WACjCb,EAAMQ,KAAKN,KAAOA,EAClBE,EAASE,KAAO,GAChB,MAEF,KAAK,GACHF,EAASC,KAAO,GAChBD,EAASU,GAAKV,EAAgB,MAAE,GAChCJ,EAAMQ,KAAKK,WAAaT,EAASU,GAEnC,KAAK,GACHC,YAAYf,EAAMQ,MAEpB,KAAK,GACL,IAAK,MACH,OAAOJ,EAASY,SAGrBjB,EAAS,KAAM,CAAC,CAAC,EAAG,SAGlB,SAAmBkB,GACxB,OAAOrB,EAAK3C,MAAMwB,KAAMtB,aAzCT,IACbyC,GA6CJsB,EAAU,KACVC,EAAW,EAEX1G,EAAM,WAGR,GAFA0G,IAEID,EACF,OAAOA,EAGT,IAAIE,EAAMC,IAAIC,gBAAgB,IAAIC,KAAK,CAAC,IAAK7B,EAAK/D,WAAY,OAAQ,CACpE6F,KAAM,4BAIR,OAFAN,EAAU,IAAIO,OAAOL,GACrBC,IAAIK,gBAAgBN,GACbF,GAYLhH,EAAQ,GAERyH,GACEvC,EAAQd,kBAAkBuB,mBAAmBC,KAAK,SAAS8B,EAASnB,GACtE,IAAIC,EACAmB,EAAS1E,UACb,OAAO0C,mBAAmBM,KAAK,SAAmB2B,GAChD,OACE,OAAQA,EAAUzB,KAAOyB,EAAUxB,MACjC,KAAK,EAGH,GAFAI,EAAUmB,EAAOzI,OAAS,QAAmBwF,IAAdiD,EAAO,GAAmBA,EAAO,GAAK,KAE/DpB,KAAQvG,GAAQ,CACpB4H,EAAUxB,KAAO,EACjB,MAIF,OADAwB,EAAUxB,KAAO,EACVpG,EAAMuG,GAEf,KAAK,EACH,OAAOqB,EAAUC,OAAO,SAAUD,EAAUnB,MAE9C,KAAK,EACH,OAAOmB,EAAUC,OAAO,SAAU7H,EAAMuG,GAAQ,IAAIrC,QAAQ,SAAUR,EAASC,GAC7E,IAAImE,EAASvH,IACbuH,EAAOjB,YAAY,CACjBN,KAAMA,EACNC,QAASA,EAAQH,QAEnByB,EAAOC,iBAAiB,UAAW,SAAUjC,GAC3C,IAAIQ,EAAOR,EAAMQ,KAEbA,EAAKC,OAASA,MAzChCU,GAEgB,IACdD,EAAQgB,YACRhB,EAAU,MA2CsB,MAAhBV,EAAKI,OAKT/C,EAAO,IAAIsE,MAAM,GAAGC,OAAO5B,EAAKK,WAAY,SAASuB,OAAO5B,EAAKC,KAAM,gBAJrE7C,EAAQ4C,EAAKN,YAQrB,KAAK,EACL,IAAK,MACH,OAAO4B,EAAUd,SAGtBY,MAGE,SAAgBS,GACrB,OAAOjD,EAAMnC,MAAMwB,KAAMtB,aAIzBmF,GACEjD,EAAQf,kBAAkBuB,mBAAmBC,KAAK,SAASyC,EAASrC,EAAMQ,GAC5E,IAAIU,EAAKoB,EACT,OAAO3C,mBAAmBM,KAAK,SAAmBsC,GAChD,OACE,OAAQA,EAAUpC,KAAOoC,EAAUnC,MACjC,KAAK,EASH,OARAI,EAAUxD,cAAc,GAAI,CAC1BwF,QAASC,UACR,CACDjC,QAASA,IAEXU,EAAMC,IAAIC,gBAAgBpB,GAC1BsC,EAAQ,IAAII,cACZH,EAAUnC,KAAO,EACVkC,EAAMK,QAAQ,gBAAiBT,OAAOhB,EAAK,OAEpD,KAAK,EAOH,OANAC,IAAIK,gBAAgBN,GAEhB,uBAAwBV,EAAQgC,UAClChC,EAAQgC,QAAQI,mBAAqB,GAAGV,OAAOnH,mBAAmByF,EAAQgC,QAAQI,oBAAqB,CAACN,KAGnGC,EAAUV,OAAO,SAAUS,GAEpC,KAAK,EACL,IAAK,MACH,OAAOC,EAAUzB,SAGtBuB,MAGE,SAAaQ,EAAKC,GACvB,OAAO3D,EAAMpC,MAAMwB,KAAMtB,aAIzB8F,GACE3D,EAAQhB,kBAAkBuB,mBAAmBC,KAAK,SAASoD,EAAShD,EAAMQ,GAC5E,IAAIyC,EAAQC,EAASC,EACrB,OAAOxD,mBAAmBM,KAAK,SAAmBmD,GAChD,OACE,OAAQA,EAAUjD,KAAOiD,EAAUhD,MACjC,KAAK,EASH,OARA6C,EAAS,IAAII,WACbH,EAAU,IAAIhF,QAAQ,SAAUR,GAC9B,OAAOuF,EAAOlB,iBAAiB,UAAW,SAAUuB,GAClD,OAAO5F,EAAQ4F,EAAOC,WAAWJ,YAGrCF,EAAOO,WAAWxD,GAClBoD,EAAUhD,KAAO,EACV8C,EAET,KAAK,EAiBH,OAhBAC,EAASC,EAAU3C,KAEW,iBAAnBD,EAAQ5D,QAAuB4D,EAAQ5D,OAAO1D,SAGvDiK,GADAA,EAASpI,oBADToI,GAAS,IAAIM,WAAYC,gBAAgBP,EAAQ,aAAa3D,MAC3BmE,iBAAiBnD,EAAQ5D,UAC5CgH,IAAI,SAAUC,GAC5B,OAAOA,EAAEC,YACRC,OAAO,SAAUF,EAAGG,GACrB,OAAOH,EAAIG,KAIXxD,EAAQgC,SAAWhC,EAAQgC,mBAAmByB,cAChDzD,EAAQgC,QAAQ0B,UAAYf,GAGvBC,EAAUvB,OAAO,SAAUqB,GAEpC,KAAK,EACL,IAAK,MACH,OAAOE,EAAUtC,SAGtBkC,MAGE,SAAcmB,EAAKC,GACxB,OAAOhF,EAAMrC,MAAMwB,KAAMtB,aAIzBoH,GACEhF,EAAQjB,kBAAkBuB,mBAAmBC,KAAK,SAAS0E,EAAStE,EAAMQ,GAC5E,IAAI6D,EAAOnD,EAAKgC,EAASC,EACzB,OAAOxD,mBAAmBM,KAAK,SAAmBsE,GAChD,OACE,OAAQA,EAAUpE,KAAOoE,EAAUnE,MACjC,KAAK,EASH,OARAiE,EAAQ7D,EAAQgC,mBAAmBgC,iBAAmBhE,EAAQgC,QAAU,IAAIiC,MAC5EvD,EAAMC,IAAIC,gBAAgBpB,GAC1BkD,EAAU,IAAIhF,QAAQ,SAAUR,EAASC,GACvC0G,EAAMK,OAAShH,EACf2G,EAAMM,QAAUhH,IAElB0G,EAAMO,IAAM1D,EACZqD,EAAUnE,KAAO,EACV8C,EAET,KAAK,EAGH,OAFAC,EAASoB,EAAU9D,KACnBU,IAAIK,gBAAgBN,GACbqD,EAAU1C,OAAO,SAAUsB,GAEpC,KAAK,EACL,IAAK,MACH,OAAOoB,EAAUzD,SAGtBwD,MAGE,SAAeO,EAAKC,GACzB,OAAOzF,EAAMtC,MAAMwB,KAAMtB,aAIzB8H,GACEzF,EAAQlB,kBAAkBuB,mBAAmBC,KAAK,SAASoF,EAAShF,GACtE,IAAIkB,EAAKiC,EACT,OAAOxD,mBAAmBM,KAAK,SAAmBgF,GAChD,OACE,OAAQA,EAAU9E,KAAO8E,EAAU7E,MACjC,KAAK,EAGH,OAFAc,EAAMC,IAAIC,gBAAgBpB,GAC1BiF,EAAU7E,KAAO,EACVlC,QAAQR,UAAUS,KAAK,WAC5B,OAAOlE,wBAAwBiL,QAAQ,GAAGhD,OAAOhB,OAGrD,KAAK,EAGH,OAFAiC,EAAS8B,EAAUxE,KACnBU,IAAIK,gBAAgBN,GACb+D,EAAUpD,OAAO,SAAUsB,GAEpC,KAAK,EACL,IAAK,MACH,OAAO8B,EAAUnE,SAGtBkE,MAGE,SAAoBG,GACzB,OAAO7F,EAAMvC,MAAMwB,KAAMtB,aAIzBmI,GACE7F,EAAQnB,kBAAkBuB,mBAAmBC,KAAK,SAASyF,EAASrF,EAAMQ,GAC5E,OAAOb,mBAAmBM,KAAK,SAAmBqF,GAChD,OACE,OAAQA,EAAUnF,KAAOmF,EAAUlF,MACjC,KAAK,EACHkF,EAAU1E,GAAKZ,EAAKsB,KACpBgE,EAAUlF,KAAwB,cAAjBkF,EAAU1E,GAAqB,EAAqB,eAAjB0E,EAAU1E,GAAsB,EAAqB,cAAjB0E,EAAU1E,GAAqB,EAAqB,aAAjB0E,EAAU1E,GAAoB,EAAqB,oBAAjB0E,EAAU1E,GAA2B,GAAK,GACvM,MAEF,KAAK,EAEH,OADA0E,EAAUlF,KAAO,EACViE,EAAMrE,EAAMQ,GAErB,KAAK,EACH,OAAO8E,EAAUzD,OAAO,SAAUyD,EAAU7E,MAE9C,KAAK,EAEH,OADA6E,EAAUlF,KAAO,EACV2C,EAAK/C,EAAMQ,GAEpB,KAAK,EACH,OAAO8E,EAAUzD,OAAO,SAAUyD,EAAU7E,MAE9C,KAAK,EAEH,OADA6E,EAAUlF,KAAO,GACVgC,EAAIpC,EAAMQ,GAEnB,KAAK,GACH,OAAO8E,EAAUzD,OAAO,SAAUyD,EAAU7E,MAE9C,KAAK,GAEH,OADA6E,EAAUlF,KAAO,GACV2E,EAAW/E,GAEpB,KAAK,GACH,OAAOsF,EAAUzD,OAAO,SAAUyD,EAAU7E,MAE9C,KAAK,GACH,MAAM,IAAI5H,UAAU,2BAA2BqJ,OAAO9H,QAAQ4F,GAAO,4CAEvE,KAAK,GACL,IAAK,MACH,OAAOsF,EAAUxE,SAGtBuE,MAGE,SAAeE,EAAMC,GAC1B,OAAOjG,EAAMxC,MAAMwB,KAAMtB,aAyI7B,OArIa,WACX,SAASgC,EAAOuB,GACd9H,gBAAgB6F,KAAMU,GAEtBV,KAAKiC,QAAUxD,cAAc,GAAI,CAC/BqD,MAAO,CACLoF,KAAM,YAEP,GAAIjF,GA0HT,OAvHA9G,aAAauF,EAAQ,CAAC,CACpBxF,IAAK,QACL8D,MAAO,WACL,IAAImI,EAAStH,kBAAkBuB,mBAAmBC,KAAK,SAAS+F,EAAS7H,GACvE,IAEI8H,EAFAC,EAAQtH,KAGZ,OAAOoB,mBAAmBM,KAAK,SAAmB6F,GAChD,OACE,OAAQA,EAAU3F,KAAO2F,EAAU1F,MACjC,KAAK,EACH,IAAKvE,MAAMM,QAAQ2B,GAAM,CACvBgI,EAAU1F,KAAO,EACjB,MAIF,OADA0F,EAAU1F,KAAO,EACVtC,EAAI8F,IAAI,SAAUgC,GACvB,OAAOC,EAAMxF,MAAMuF,KAGvB,KAAK,EACH,OAAOE,EAAUjE,OAAO,SAAUiE,EAAUrF,MAE9C,KAAK,EACH,GAAqB,iBAAR3C,EAAmB,CAC9BgI,EAAU1F,KAAO,GACjB,MAMF,OAHAwF,EAAInD,SAASsD,cAAc,MACzBxF,KAAOzC,EACTgI,EAAU1F,KAAO,EACV7B,KAAK8B,MAAM,IAAIc,IAAIyE,IAE5B,KAAK,EACH,OAAOE,EAAUjE,OAAO,SAAUiE,EAAUrF,MAE9C,KAAK,GACH,KAAM3C,aAAeqD,KAAM,CACzB2E,EAAU1F,KAAO,GACjB,MAIF,OADA0F,EAAU1F,KAAO,GACVqB,EAAO3D,EAAIyC,KAAMhC,KAAKiC,SAE/B,KAAK,GACH,OAAOsF,EAAUjE,OAAO,SAAUiE,EAAUrF,MAE9C,KAAK,GACH,MAAM,IAAI5H,UAAU,2BAA2BqJ,OAAO9H,QAAQ0D,GAAM,4CAEtE,KAAK,GACL,IAAK,MACH,OAAOgI,EAAUhF,SAGtB6E,EAAUpH,SAOf,OAJA,SAAeyH,GACb,OAAON,EAAO3I,MAAMwB,KAAMtB,YA5DvB,IAiEN,CACDxD,IAAK,OACL8D,MAAO,WACL,IAAI0I,EAAQ7H,kBAAkBuB,mBAAmBC,KAAK,SAASsG,EAASpI,EAAKqI,GAC3E,IAEInG,EAFAoG,EAAS7H,KAGb,OAAOoB,mBAAmBM,KAAK,SAAmBoG,GAChD,OACE,OAAQA,EAAUlG,KAAOkG,EAAUjG,MACjC,KAAK,EACH,IAAKvE,MAAMM,QAAQ2B,GAAM,CACvBuI,EAAUjG,KAAO,EACjB,MAIF,OADAiG,EAAUjG,KAAO,EACVtC,EAAI8F,IAAI,SAAUgC,GACvB,OAAOQ,EAAOE,KAAKV,EAAGO,KAG1B,KAAK,EACH,OAAOE,EAAUxE,OAAO,SAAUwE,EAAU5F,MAE9C,KAAK,EAEH,OADA4F,EAAUjG,KAAO,EACV7B,KAAK8B,MAAMvC,GAEpB,KAAK,EAGH,OAFAkC,EAAOqG,EAAU5F,KACjB4F,EAAUjG,KAAO,EACVgF,EAAMpF,EAAMmG,GAErB,KAAK,EACH,OAAOE,EAAUxE,OAAO,SAAUwE,EAAU5F,MAE9C,KAAK,GACL,IAAK,MACH,OAAO4F,EAAUvF,SAGtBoF,EAAU3H,SAOf,OAJA,SAAcgI,EAAMC,GAClB,OAAOP,EAAMlJ,MAAMwB,KAAMtB,YA3CtB,MAkDFgC,EAlII","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('Loader', factory) :\n    (global = global || self, global.Loader = factory());\n}(this, (function () { 'use strict';\n\n    /**\n     *\n     * @private\n     * @static\n     */\n    const body = () =>\n        (onmessage = async (event) => {\n            //\n            try {\n                const response = await fetch(event.data.href, event.data.options);\n                const blob = await response.blob();\n\n                event.data.status = response.status;\n                event.data.statusText = response.statusText;\n                event.data.blob = blob;\n            } catch (e) {\n                event.data.statusText = e;\n            }\n\n            // ...\n            postMessage(event.data);\n        });\n\n    // ...\n    let lworker = null;\n    let requests = 0;\n\n    /**\n     *\n     * @private\n     */\n    const get = () => {\n        // ...\n        requests++;\n\n        // ...\n        if (lworker) {\n            return lworker;\n        }\n\n        // ...\n        const url = URL.createObjectURL(\n            new Blob([\"(\", body.toString(), \")()\"], {\n                type: \"application/javascript\",\n            })\n        );\n\n        // ...\n        lworker = new Worker(url);\n\n        // ...\n        URL.revokeObjectURL(url);\n\n        //\n        return lworker;\n    };\n\n    /**\n     *\n     * @private\n     */\n    const terminate = () => {\n        //\n        requests--;\n\n        //\n        if (requests <= 0) {\n            lworker.terminate();\n\n            lworker = null;\n        }\n    };\n\n    // ...\n    const cache = {};\n\n    /**\n     *\n     * @private\n     * @param {String} href\n     * @param {Object} options\n     */\n    var lfetch = async (href, options = {}) => {\n        // ...\n        if (href in cache) {\n            return await cache[href];\n        }\n\n        // ...\n        return (cache[href] = new Promise((resolve, reject) => {\n            //\n            const worker = get();\n\n            // ...\n            worker.postMessage({\n                href: href,\n                options: options.fetch,\n            });\n\n            // ...\n            // TODO: possibly use messageerror for reject?\n            worker.addEventListener(\"message\", (event) => {\n                const data = event.data;\n\n                // ...\n                if (data.href !== href) {\n                    return;\n                }\n\n                //\n                terminate();\n\n                // ...\n                if (data.status === 200) {\n                    resolve(data.blob);\n\n                    return;\n                }\n\n                // ...\n                reject(new Error(`${data.statusText} for ${data.href} resource.`));\n            });\n        }));\n    };\n\n    var css = async (blob, options) => {\n        //\n        options = { ...{ element: document }, options };\n\n        //\n        const url = URL.createObjectURL(blob);\n\n        //\n        const sheet = new CSSStyleSheet();\n\n        //\n        await sheet.replace(`@import url(\"${url}\")`);\n\n        //\n        URL.revokeObjectURL(url);\n\n        //\n        if (\"adoptedStyleSheets\" in options.element) {\n            options.element.adoptedStyleSheets = [\n                ...options.element.adoptedStyleSheets,\n                sheet,\n            ];\n        }\n\n        //\n        return sheet;\n    };\n\n    var html = async (blob, options) => {\n        //\n        const reader = new FileReader();\n\n        //\n        const promise = new Promise((resolve) =>\n            reader.addEventListener(\"loadend\", (buffer) =>\n                resolve(buffer.srcElement.result)\n            )\n        );\n\n        //\n        reader.readAsText(blob);\n\n        //\n        let result = await promise;\n\n        //\n        if (typeof options.filter === \"string\" && options.filter.length) {\n            //\n            result = new DOMParser().parseFromString(result, \"text/html\").body;\n            //\n            result = [...result.querySelectorAll(options.filter)];\n            //\n            result = result.map((x) => x.outerHTML).reduce((x, y) => x + y);\n        }\n\n        //\n        if (options.element && options.element instanceof HTMLElement) {\n            options.element.innerHTML = result;\n        }\n\n        //\n        return promise;\n    };\n\n    var image = async (blob, options) => {\n        //\n        const image =\n            options.element instanceof HTMLImageElement\n                ? options.element\n                : new Image();\n\n        //\n        const url = URL.createObjectURL(blob);\n\n        //\n        const promise = new Promise((resolve, reject) => {\n            image.onload = resolve;\n            image.onerror = reject;\n        });\n\n        //\n        image.src = url;\n\n        //\n        const result = await promise;\n\n        //\n        URL.revokeObjectURL(url);\n\n        //\n        return result;\n    };\n\n    var javascript = async (blob) => {\n        //\n        const url = URL.createObjectURL(blob);\n\n        //\n        const result = await import(url);\n\n        //\n        URL.revokeObjectURL(url);\n\n        //\n        return result;\n    };\n\n    /**\n     *\n     * @param {Blob} blob\n     * @param {Object} options\n     */\n    var lload = async (blob, options) => {\n        //...\n        switch (blob.type) {\n            //...\n            case \"image/png\":\n            case \"image/jpeg\":\n                return await image(blob, options);\n\n            //...\n            case \"text/html\":\n                return await html(blob, options);\n\n            //...\n            case \"text/css\":\n                return await css(blob, options);\n\n            //...\n            case \"text/javascript\":\n                return await javascript(blob);\n        }\n\n        // ...\n        throw new TypeError(\n            `Invalid argment of type ${typeof blob} passed to Loader class \"fetch\" method.`\n        );\n    };\n\n    class Loader {\n        /**\n         *\n         * @param {Object} options\n         */\n        constructor(options) {\n            this.options = {\n                ...{ fetch: { cors: \"no-cors\" } },\n                ...options,\n            };\n        }\n\n        /**\n         *\n         * @param {Array.<String>|Array.<URL>|String|URL} arg\n         * @returns {Array.<Promise>|Promise}\n         */\n        async fetch(arg) {\n            // ...\n            if (Array.isArray(arg)) {\n                return await arg.map((a) => this.fetch(a));\n            }\n\n            // ...\n            if (typeof arg === \"string\") {\n                const a = document.createElement(\"a\");\n\n                a.href = arg;\n\n                return await this.fetch(new URL(a));\n            }\n\n            // ...\n            if (arg instanceof URL) {\n                return await lfetch(arg.href, this.options);\n            }\n\n            // ...\n            throw new TypeError(\n                `Invalid argment of type ${typeof arg} passed to Loader class \"fetch\" method.`\n            );\n        }\n\n        /**\n         *\n         * @param {Array.<String>|Array.<URL>|String|URL} arg\n         * @returns {Array.<Promise>|Promise}\n         */\n        async load(arg, el) {\n            // ...\n            if (Array.isArray(arg)) {\n                return await arg.map((a) => this.load(a, el));\n            }\n\n            // ...\n            const blob = await this.fetch(arg);\n\n            // ...\n            return await lload(blob, el);\n        }\n    }\n\n    return Loader;\n\n})));\n"],"file":"loader.es5.min.js"}