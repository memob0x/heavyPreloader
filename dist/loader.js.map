{"version":3,"file":"loader.js","sources":["src/loader.utils.mjs","src/loader.resource.mjs","src/loader.loaders.mjs","src/loader.worker.mjs","src/loader.fetch.mjs","src/loader.load.mjs","src/loader.mjs"],"sourcesContent":["/**\n *\n * @param {Object} o\n * @param {String} p\n */\nexport const prop = (o, p) =>\n    p.split(\".\").reduce((xs, x) => (xs && xs[x] ? xs[x] : null), o);\n\n/**\n *\n * @param {String|LoaderResource} url\n * @returns {URL}\n */\nexport const getURL = arg => {\n    arg = prop(arg, \"url\") || arg;\n    arg = prop(arg, \"href\") || arg;\n\n    const a = document.createElement(\"a\");\n    a.href = arg;\n\n    return new URL(a);\n};\n\n/**\n *\n * @param {HTMLElement} el\n * @returns {Boolean}\n */\nexport const isSupportedElement = el => {\n    return (\n        el instanceof HTMLImageElement ||\n        el instanceof HTMLPictureElement ||\n        el instanceof HTMLSourceElement ||\n        el instanceof HTMLVideoElement ||\n        el instanceof HTMLAudioElement\n    );\n};\n\n/**\n *\n * @param {Function} work\n * @returns {Worker}\n */\nexport const createWorker = work => {\n    work = typeof work !== \"function\" ? () => {} : work;\n\n    const url = URL.createObjectURL(\n        new Blob([\"(\", work.toString(), \")()\"], {\n            type: \"application/javascript\"\n        })\n    );\n\n    const worker = new Worker(url);\n\n    URL.revokeObjectURL(url);\n\n    return worker;\n};\n\n/**\n *\n * @param {String|LoaderResource} arg\n */\nexport const getLoaderType = arg => {\n    arg = getURL(arg)\n        .href.split(/\\#|\\?/)[0]\n        .split(\".\")\n        .pop()\n        .trim();\n\n    switch (arg) {\n        case \"jpg\":\n        case \"jpe\":\n        case \"jpeg\":\n        case \"jif\":\n        case \"jfi\":\n        case \"jfif\":\n        case \"gif\":\n        case \"tif\":\n        case \"tiff\":\n        case \"bmp\":\n        case \"dib\":\n        case \"webp\":\n        case \"ico\":\n        case \"cur\":\n        case \"svg\":\n        case \"png\":\n            return \"image\";\n        case \"css\":\n            return \"style\";\n        case \"js\":\n        case \"mjs\":\n            return \"script\";\n        /*case \"mp3\":\n        case \"ogg\":\n        case \"oga\":\n        case \"spx\":\n        case \"ogg\":\n        case \"wav\":\n        case \"mp4\":\n        case \"ogg\":\n        case \"ogv\":\n        case \"webm\":\n            return \"media\";*/\n        default:\n            return null;\n    }\n};\n\n/**\n *\n * @param {URL|String|LoaderResource} arg\n * @returns {Boolean}\n */\nexport const isCORS = arg => {\n    arg = getURL(arg);\n\n    return (\n        arg.hostname !== window.location.hostname ||\n        arg.protocol !== window.location.protocol\n    );\n};\n","import { getURL, prop, isSupportedElement } from \"./loader.utils.mjs\";\n\n// ...\nconst collection = new WeakMap();\n\n// ...\nconst build = data => {\n    let o = {};\n\n    if (isSupportedElement(data)) {\n        o.el = data;\n        o.url = getURL(prop(o.el, \"dataset.src\")); // TODO: find a way to get currentSrc without triggering load\n    } else {\n        o.el = prop(data, \"el\");\n        o.url = data instanceof URL ? data : prop(data, \"url\");\n    }\n\n    o.blob = prop(data, \"blob\");\n\n    return o;\n};\n\n// ...\n// TODO: refactor to avoid \"override\" param\nexport default class LoaderResource {\n    constructor(data, override) {\n        let o = build(data);\n\n        if (collection.has(o.url) && !override) {\n            o = collection.get(o.url);\n        }\n\n        if (collection.has(o.el) && !override) {\n            o = collection.get(o.el);\n        }\n\n        this.el = o.el;\n        this.url = o.url;\n        this.blob = o.blob;\n\n        collection.set(o.el || o.url, this);\n    }\n\n    static isLoaderResource(data) {\n        return data instanceof this;\n    }\n}\n","export const loadImage = (url, el = new Image()) =>\n    new Promise((resolve, reject) => {\n        el.onload = () => resolve(el);\n        el.onerror = reject;\n\n        el.src = url;\n    });\n\n/* export const loadMedia = (url, el = new Image()) =>\n    // TODO:\n    new Promise((resolve, reject) => {\n        el.onload = () => resolve(el);\n        el.onerror = reject;\n\n        el.src = url;\n    }); */\n\nexport const loadStyle = (url, el = document.createElement(\"div\")) => {\n    const sheet = new CSSStyleSheet();\n\n    const promise = sheet.replace(`@import url(\"${url}\")`);\n\n    if (\"adoptedStyleSheets\" in el) {\n        el.adoptedStyleSheets = [...el.adoptedStyleSheets, sheet];\n    }\n\n    return promise;\n};\n\n/*export const loadObject = (url, el = document.createElement(\"object\")) =>\n    new Promise((resolve, reject) => {\n        // TODO: check\n        el.onload = () => resolve(el);\n        el.onerror = reject;\n\n        el.data = url;\n\n        el.width = 0;\n        el.height = 0;\n\n        document.body.append(el);\n    });*/\n\nexport const loadScript = (url, el = document.createElement(\"script\")) =>\n    new Promise((resolve, reject) => {\n        // TODO: check\n        el.onload = () => resolve(el);\n        el.onerror = reject;\n\n        el.src = url;\n        el.async = true;\n\n        document.head.append(el);\n    });\n\nexport default {\n    image: (url, /*bool,*/ el) => loadImage(url, /*bool ?*/ el /*: void 0*/),\n    // media: (url, bool, el) => loadMedia(url, bool ? el : void 0),\n    script: (url /*, bool*/) =>\n        /*(bool ?*/ loadScript(url) /*: loadObject(url))*/,\n    style: (url /*, bool*/) => loadStyle(url, /*bool ?*/ document /*: void 0*/)\n};\n","import { createWorker } from \"./loader.utils.mjs\";\n\nexport const work = () => {\n    onmessage = async event => {\n        const data = event.data;\n\n        // ...\n        let message;\n        try {\n            const response = await fetch(data.href, data.options);\n            const blob = await response.blob();\n\n            message = {\n                status: response.status,\n                statusText: response.statusText,\n                blob: blob\n            };\n        } catch (e) {\n            message = {\n                status: 0,\n                statusText: e\n            };\n        }\n\n        // ...\n        message.href = data.href;\n        postMessage(message);\n    };\n};\n\nlet worker = null;\nexport default () => {\n    // ...\n    if (worker) {\n        return worker;\n    }\n\n    // ...\n    return (worker = createWorker(work));\n};\n","import loaderWorker from \"./loader.worker.mjs\";\nimport LoaderResource from \"./loader.resource.mjs\";\n\n// ...\nconst collection = {};\n\n/**\n *\n * @param {LoaderResource} resource\n * @param {Object} options\n */\nexport default async (resource, options = {}) => {\n    // ...\n    if (resource.url.href in collection) {\n        const el = resource.el;\n\n        resource = await collection[resource.url.href];\n\n        return new LoaderResource({ ...resource, ...{ el: el } }, true);\n    }\n\n    // ...\n    return (collection[resource.url.href] = new Promise((resolve, reject) => {\n        const worker = loaderWorker();\n\n        // ...\n        worker.postMessage({\n            href: resource.url.href,\n            options: options.fetch\n        });\n\n        // ...\n        worker.addEventListener(\"message\", event => {\n            const data = event.data;\n\n            // ...\n            if (data.href !== resource.url.href) {\n                return;\n            }\n\n            // ...\n            if (data.status === 200) {\n                resource = new LoaderResource(\n                    { ...resource, ...{ blob: data.blob } },\n                    true\n                );\n\n                resolve(resource);\n\n                return;\n            }\n\n            // ...\n            reject(new Error(`${data.statusText} ${data.href}`));\n        });\n    }));\n};\n","import Loaders from \"./loader.loaders.mjs\";\nimport _fetch from \"./loader.fetch.mjs\";\nimport { getLoaderType /*, isCORS */ } from \"./loader.utils.mjs\";\n\n/**\n *\n * @param {LoaderResource} resource\n * @param {Object} options\n */\nexport default async (resource, options /*, bool*/) => {\n    // ...\n    const el = resource.el;\n\n    // ...\n    try {\n        resource = await _fetch(resource, options);\n        resource.el = el;\n    } catch (e) {}\n\n    // ...\n    const type = getLoaderType(resource);\n    if (!(type in Loaders)) {\n        throw new Error(\"invalid type\");\n    }\n\n    // ...\n    const url = !!resource.blob\n        ? URL.createObjectURL(resource.blob)\n        : resource.url.href;\n\n    // ...\n    await Loaders[type](url, /* bool,*/ resource.el).finally(() =>\n        URL.revokeObjectURL(url)\n    );\n\n    return resource;\n};\n","import { getURL, isSupportedElement } from \"./loader.utils.mjs\";\nimport LoaderResource from \"./loader.resource.mjs\";\nimport _load from \"./loader.load.mjs\";\nimport _fetch from \"./loader.fetch.mjs\";\n\nexport default class Loader {\n    constructor(options) {\n        // this way fetch throws but you don't get double download\n        // TODO: check if opt makes sense\n        this.options = {\n            ...{ fetch: { cors: \"no-cors\" } },\n            ...options\n        };\n    }\n\n    /**\n     *\n     * @param {String|Array|LoaderResource|HTMLElement|NodeList} arg\n     * @returns {Array|Promise}\n     */\n    fetch(arg) {\n        // ...\n        if (arg instanceof NodeList) {\n            return this.fetch([...arg]);\n        }\n\n        // ...\n        if (Array.isArray(arg)) {\n            return arg.map(a => this.fetch(a));\n        }\n\n        // ...\n        if (typeof arg === \"string\") {\n            return this.fetch(getURL(arg));\n        }\n\n        // ...\n        if (isSupportedElement(arg) || arg instanceof URL) {\n            return this.fetch(new LoaderResource(arg));\n        }\n\n        // ...\n        if (LoaderResource.isLoaderResource(arg)) {\n            return _fetch(arg, this.options);\n        }\n\n        // ...\n        return Promise.reject(new Error(\"invalid argument\"));\n    }\n\n    /**\n     * @param {String|Array|LoaderResource|HTMLElement|NodeList|URL} arg\n     * @returns {Array|Promise}\n     */\n    load(arg) {\n        if (arg instanceof NodeList) {\n            return this.load([...arg]);\n        }\n\n        // ...\n        if (Array.isArray(arg)) {\n            return arg.map(a => this.load(a));\n        }\n\n        // ...\n        if (typeof arg === \"string\") {\n            return this.load(getURL(arg));\n        }\n\n        // ...\n        if (isSupportedElement(arg) || arg instanceof URL) {\n            return this.load(new LoaderResource(arg));\n        }\n\n        // ...\n        if (LoaderResource.isLoaderResource(arg)) {\n            return _load(arg, this.options /*, true*/);\n        }\n\n        // ...\n        return Promise.reject(new Error(\"invalid argument\"));\n    }\n}\n"],"names":["collection"],"mappings":"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"}