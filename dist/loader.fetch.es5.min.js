"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function asyncGeneratorStep(e,t,r,n,o,a,s){try{var c=e[a](s),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function s(e){asyncGeneratorStep(a,n,o,s,c,"next",e)}function c(e){asyncGeneratorStep(a,n,o,s,c,"throw",e)}s(void 0)})}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Loader",t):(e=e||self).Loader=t()}(void 0,function(){var e=function(){return e=function(){return onmessage=(e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t.data.href,t.data.options);case 3:return r=e.sent,e.next=6,r.blob();case 6:n=e.sent,t.data.status=r.status,t.data.statusText=r.statusText,t.data.blob=n,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t.data.statusText=e.t0;case 15:postMessage(t.data);case 16:case"end":return e.stop()}},e,null,[[0,12]])})),function(t){return e.apply(this,arguments)});var e},t=URL.createObjectURL(new Blob(["(",e.toString(),")()"],{type:"application/javascript"})),r=new Worker(t),URL.revokeObjectURL(t),r;var e,t,r},t=new(function(){function t(){_classCallCheck(this,t),this._worker=null,this._requests=0}return _createClass(t,[{key:"terminate",value:function(){return this._requests>0&&this._requests--,0===this._requests&&(this._worker.terminate(),this._worker=null),this._worker}},{key:"worker",value:function(){return this._requests++,this._worker?this._worker:(this._worker=e(),this._worker)}}]),t}());return new(function(){function e(){_classCallCheck(this,e),this.cache={}}return _createClass(e,[{key:"fetch",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!0===(n=_objectSpread({},{cache:!0,fetch:{}},{},n)).cache&&r in this.cache)){e.next=5;break}return e.next=4,this.cache[r];case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",this.cache[r]=new Promise(function(e,o){var a=t.worker();a.postMessage({href:r,options:n.fetch}),a.addEventListener("message",function(n){var a=n.data;a.href===r&&(t.terminate(),200!==a.status?o(new Error("".concat(a.statusText," for ").concat(a.href," resource."))):e(a.blob))})}));case 6:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}]),e}())});
//# sourceMappingURL=loader.fetch.es5.min.js.map
