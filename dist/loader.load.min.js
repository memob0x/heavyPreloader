!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Loader",t):(e=e||self).Loader=t()}(this,function(){"use strict";var e=async(e,t)=>{t={element:document,options:t};const n=URL.createObjectURL(e),r=new CSSStyleSheet;return await r.replace(`@import url("${n}")`),URL.revokeObjectURL(n),"object"==typeof t.element&&"adoptedStyleSheets"in t.element&&(t.element.adoptedStyleSheets=[...t.element.adoptedStyleSheets,r]),r},t=async(e,t)=>{const n=new FileReader,r=new Promise(e=>n.addEventListener("loadend",t=>e(t.srcElement.result)));n.readAsText(e);let o=await r;return t&&"string"==typeof t.filter&&t.filter.length&&(o=(o=[...(o=(new DOMParser).parseFromString(o,"text/html").body).querySelectorAll(t.filter)]).length?o.map(e=>e.outerHTML).reduce((e,t)=>e+t):o),t&&t.element&&t.element instanceof HTMLElement&&o&&"string"==typeof o&&o.length&&(t.element.innerHTML=o),r},n=async(e,t)=>{const n=t&&t.element instanceof HTMLImageElement?t.element:new Image,r=URL.createObjectURL(e),o=new Promise((t,r)=>{n.onload=t,n.onerror=(()=>r(new Error(`Error loading image ${e.type}`)))});n.src=r;const s=await o;return URL.revokeObjectURL(r),s},r=async e=>{const t=URL.createObjectURL(e),n=await import(t);return URL.revokeObjectURL(t),n};return new class{constructor(){this.loaders={image:n,html:t,css:e,javascript:r}}register(e,t){this.loaders[e]=t}async load(e,t){const n=e.type,r=n.split("/").reduce((e,t)=>[n,e,t]);for(const n in r){const o=r[n];if(o in this.loaders)return await this.loaders[o](e,t)}throw new TypeError(`Invalid ${e.type} media type passed to Loader class "load" method.`)}}});
//# sourceMappingURL=loader.load.min.js.map
