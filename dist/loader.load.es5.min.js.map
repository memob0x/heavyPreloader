{"version":3,"sources":["loader.load.mjs"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_getRequireWildcardCache","WeakMap","cache","_interopRequireWildcard","obj","__esModule","_typeof","default","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","hasOwnProperty","call","desc","set","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","push","apply","_objectSpread","arguments","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","err","undefined","global","factory","exports","module","define","amd","Loader","_ref","_ref2","_ref3","_ref4","css","regeneratorRuntime","mark","_callee","blob","options","url","sheet","wrap","_context","prev","next","element","document","URL","createObjectURL","CSSStyleSheet","replace","concat","revokeObjectURL","adoptedStyleSheets","abrupt","stop","_x","_x2","html","_callee2","reader","promise","result","_context2","FileReader","addEventListener","buffer","srcElement","readAsText","sent","DOMParser","parseFromString","body","querySelectorAll","map","x","outerHTML","reduce","y","HTMLElement","innerHTML","_x3","_x4","image","_callee3","_context3","HTMLImageElement","Image","onload","onerror","Error","type","src","_x5","_x6","javascript","_callee4","_context4","require","_x7","LoaderLoad","loaders","loader","_load","_callee5","_context5","split","t0","t1","_x8","_x9"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('Loader', factory) :\n    (global = global || self, global.Loader = factory());\n}(this, (function () { 'use strict';\n\n    var css = async (blob, options) => {\n        //\n        options = { ...{ element: document }, options };\n\n        //\n        const url = URL.createObjectURL(blob);\n\n        //\n        const sheet = new CSSStyleSheet();\n\n        //\n        await sheet.replace(`@import url(\"${url}\")`);\n\n        //\n        URL.revokeObjectURL(url);\n\n        //\n        if (\n            typeof options.element === \"object\" &&\n            \"adoptedStyleSheets\" in options.element\n        ) {\n            options.element.adoptedStyleSheets = [\n                ...options.element.adoptedStyleSheets,\n                sheet,\n            ];\n        }\n\n        //\n        return sheet;\n    };\n\n    var html = async (blob, options) => {\n        //\n        const reader = new FileReader();\n\n        //\n        const promise = new Promise((resolve) =>\n            reader.addEventListener(\"loadend\", (buffer) =>\n                resolve(buffer.srcElement.result)\n            )\n        );\n\n        //\n        reader.readAsText(blob);\n\n        //\n        let result = await promise;\n\n        //\n        if (\n            options &&\n            typeof options.filter === \"string\" &&\n            options.filter.length\n        ) {\n            //\n            result = new DOMParser().parseFromString(result, \"text/html\").body;\n            //\n            result = [...result.querySelectorAll(options.filter)];\n            //\n            result = result.length\n                ? result.map((x) => x.outerHTML).reduce((x, y) => x + y)\n                : result;\n        }\n\n        //\n        if (\n            options &&\n            options.element &&\n            options.element instanceof HTMLElement &&\n            result &&\n            typeof result === \"string\" &&\n            result.length\n        ) {\n            options.element.innerHTML = result;\n        }\n\n        //\n        return promise;\n    };\n\n    var image = async (blob, options) => {\n        //\n        const image =\n            options && options.element instanceof HTMLImageElement\n                ? options.element\n                : new Image();\n\n        //\n        const url = URL.createObjectURL(blob);\n\n        //\n        const promise = new Promise((resolve, reject) => {\n            image.onload = resolve;\n            image.onerror = () =>\n                reject(new Error(`Error loading image ${blob.type}`));\n        });\n\n        //\n        image.src = url;\n\n        //\n        const result = await promise;\n\n        //\n        URL.revokeObjectURL(url);\n\n        //\n        return result;\n    };\n\n    var javascript = async (blob) => {\n        //\n        const url = URL.createObjectURL(blob);\n\n        //\n        const result = await import(url);\n\n        //\n        URL.revokeObjectURL(url);\n\n        //\n        return result;\n    };\n\n    /**\n     *\n     */\n    var loader_load = new (class LoaderLoad {\n        constructor() {\n            // loaders closure, filled with default loaders\n            // https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types\n            this.loaders = {\n                image: image,\n                html: html,\n                css: css,\n                javascript: javascript,\n            };\n        }\n\n        /**\n         *\n         * @param {String} type\n         * @param {Function} loader\n         * @returns {void}\n         */\n        register(type, loader) {\n            this.loaders[type] = loader;\n        }\n\n        /**\n         * Loads a resource, which usually consists in attaching it to an existent DOM element\n         * @private\n         * @param {Blob} blob The resource to be loaded in Blob form\n         * @param {Object} options The resource load options\n         * @returns {Promise} The resource load in promise form\n         */\n        async load(blob, options) {\n            const type = blob.type;\n\n            //...\n            const keys = type.split(\"/\").reduce((x, y) => [type, x, y]);\n\n            // ...\n            for (const key in keys) {\n                const loader = keys[key];\n\n                if (loader in this.loaders) {\n                    return await this.loaders[loader](blob, options);\n                }\n            }\n\n            // ...\n            throw new TypeError(\n                `Invalid ${blob.type} media type passed to Loader class \"load\" method.`\n            );\n        }\n    })();\n\n    return loader_load;\n\n})));\n"],"file":"loader.load.es5.min.js"}