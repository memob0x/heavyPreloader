!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Loader",e):(t=t||self).Loader=e()}(this,function(){"use strict";const t=()=>(t=>{const e=URL.createObjectURL(new Blob(["(",t.toString(),")()"],{type:"application/javascript"})),s=new Worker(e);return URL.revokeObjectURL(e),s})(()=>onmessage=(async t=>{try{const e=await fetch(t.data.href,t.data.options),s=await e.blob();t.data.status=e.status,t.data.statusText=e.statusText,t.data.blob=s}catch(e){t.data.statusText=e}postMessage(t.data)}));var e=new class{constructor(){this._worker=null,this._requests=0}terminate(){return this._requests>0&&this._requests--,0===this._requests&&(this._worker.terminate(),this._worker=null),this._worker}worker(){return this._requests++,this._worker?this._worker:(this._worker=t(),this._worker)}};return new class{constructor(){this.cache={}}async fetch(t,s){return!0===(s={cache:!0,fetch:{},...s}).cache&&t in this.cache?await this.cache[t]:this.cache[t]=new Promise((r,a)=>{const o=e.worker();o.postMessage({href:t,options:s.fetch}),o.addEventListener("message",s=>{const o=s.data;o.href===t&&(e.terminate(),200!==o.status?a(new Error(`${o.statusText} for ${o.href} resource.`)):r(o.blob))})})}}});
//# sourceMappingURL=loader.fetch.min.js.map
